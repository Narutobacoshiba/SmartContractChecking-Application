<template>
  <div id="con-setting" class="container">
    <div id="header">
      Contract-Specifc Property Setting Non-Template
    </div>
      <div class="row">
        <div class="col-2"><h4>Property</h4></div>
        <div class="col-9">
          <select name="" class="form-select" v-if="list_property.length > 0" v-model="selected_property">
            <option v-for="prop in list_property" :key="prop.id" :value="prop">{{prop.name}}</option>
          </select>
        </div>
      </div>
      <div class="row">
        <div class="col-2"><h4>Formular</h4></div>
        <div class="col-9"><EditorSc @update="getCodeChange"/></div>
      </div>
      <div id="btn-group">
        <button class="btn btn-primary btn-sm" @click="routing('save')">Save</button>
        <button class="btn btn-primary btn-sm" @click="routing('create')">Create a new Contract-Specific Property</button>
        <button class="btn btn-outline-secondary btn-sm" @click="routing('back')">Back</button>
      </div>
  </div>
</template>

<script>
import EditorSc from "../../../../components/TextEditor.vue";
import {DetectLTLFormatError} from "../../../../mixins/text-parser"

export default {
  data(){
    return{
      list_property: [
        {id: 1, name: 'No bid calls can be made once the bidding window is closed.'},
        {id: 2, name: 'No reveal calls can be made once the revealing window is closed.'},
        {id: 3, name: 'No reveal calls can be made once the revealing window is closed.'},
        {id: 4, name: 'A bidder who has not revealed his bid cannot be the winner(highest bid)'},
        {id: 5, name: 'Every call is followed by an acknowledgment'},
        {id: 6, name: 'Others'}
      ],
      selected_property: null,
      ltlcode: ""
    }
  },
  mounted(){
    if(this.list_property.length > 0) this.selected_property = this.list_property[0]
  },
  components: { EditorSc },
  methods: {
    getCodeChange(value){
      this.ltlcode = value
    },
    routing(param) {
      if (param == "save") {
        console.log(DetectLTLFormatError(this.ltlcode))
        //this.$store.commit("data/SetProcessView","generate-sc2cpn")
      }
      else if (param == "back") {
        this.$store.commit("data/SetFourthStepViews","csps-choosetypes")
        this.$emit("changeView",2)
      } 
      else if(param == 'create'){
        this.$router.push({name: "CreateCsp",params: {parent_path: "/process"}})
      }
    },
  }
};
</script>

<style scoped>
#con-setting{
  width: 70%;
}
#header{
  margin-top: 0;
  text-align: center;
  font-size: 32px;
  font-weight: bold;
}
.row{
  margin-top: 20px;
}
#btn-group{
  width: 100%;
  display: flex;
  align-items: center;
  margin-top: 20px;
}
button{
  margin: auto;
}
</style>