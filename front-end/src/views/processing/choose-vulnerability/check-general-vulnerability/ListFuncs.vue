<template>
  <div class="container" style="border: gray solid">
    <div class="row">
      <div class="col-2">
        <div class="vertical-nav">
          <div class="nav-item text-truncate" v-for="func in data" v-bind:key="func.name">
            <a class="nav-link"
              v-on:click="selected_func = func.name"
              v-bind:class="{ chosen: func.name == selected_func }"
              >{{ func.name }}</a>
          </div>
        </div>
      </div>
      <div class="col-8 full-size">
        <lv-list :func="get_function(this.selected_func)[0]" :sc_id="sc_id" :vul_id="vul_id"></lv-list>
      </div>
      <div class="col-2"></div>
    </div>
  </div>
</template>

<script>
import LVsList from "./ListLVs.vue"
export default {
  components:{
    "lv-list": LVsList
  },
  props: ["data","sc_id", "vul_id"],
  data() {
    return {
      selected_func: this.data[0].name,
    };
  },
  methods: {
    get_function: function (current_func) {
      var a = this.data.filter(function (func) {
        return func["name"] === current_func;
      }); 
      if(a.length > 0) return a;
      else {
        this.selected_func = this.data[0].name
        return [this.data[0]]}
    },
    get_func(){
        return this.get_function(this.selected_func)
    }
  }
};
</script>

<style scoped>
.row {
  margin: 2% 0%;
  text-align: left;
  width: 100%;
}
.vertical-nav {
  display: block;
  float: right;
}
.nav-link {
  color: #383838;
}
.vertical-nav .nav-item {
  width: 100px;
  height: 40px;
  font-size: 80%;
  border-radius: 3px;
  margin: none;
  padding: none;
}
.vertical-nav .nav-link {
  border-left: grey solid 2px;
  border-bottom: grey solid 2px;
}
.chosen {
  color: white;
  background: #383838;
}
.vertical-nav .nav-link:hover {
  cursor: pointer;
}

@media only screen and (max-width: 960px) {
  [class*="full-size"] {
    width: 100%;
  }
  span {
    margin: 0;
  }
  .vertical-nav {
    width: 100%;
  }
}
</style>